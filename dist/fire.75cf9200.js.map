{"version":3,"sources":["fire/index.js"],"names":["c","document","createElement","$","getContext","w","width","window","innerWidth","h","height","innerHeight","particles","body","appendChild","randomColor","r","Math","floor","random","g","b","particle","location","x","y","speed","life","radius","color","opacity","dead","draw","globalCompositeOperation","fillStyle","beginPath","arc","PI","globalAlpha","fill","closePath","update","stage","fillRect","reset","loop","L","length","push","i","p","requestAnimationFrame","init","addEventListener"],"mappings":"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","file":"fire.75cf9200.js","sourceRoot":"../src","sourcesContent":["var c = document.createElement('canvas'),\n    $ = c.getContext('2d'),\n    w = c.width = window.innerWidth / 2,\n    h = c.height = window.innerHeight / 2,\n    particles = []\n\ndocument.body.appendChild(c)\n\n/**\n *  随机获取颜色\n *\n * @returns rgb(x,x,x)\n */\nfunction randomColor() {\n    var r = 100 + Math.floor(Math.random() * 255),\n        g = Math.floor(Math.random() * 150),\n        b = Math.floor(Math.random() * 15)\n    return 'rgb(' + r + ',' + g + ',' + b + ')'\n}\n\nfunction particle() {\n    this.location = {\n        x: w / 2,\n        y: h / 2\n    }\n    this.speed = {\n        x: -1.5 + Math.random() * 3,\n        y: 1 + Math.random() * 5.5\n    }\n    this.life = 50\n    this.radius = 1 + Math.floor(Math.random() * 25)\n    this.color = randomColor()\n    this.opacity = 1\n    this.dead = false\n    this.draw = function () {\n        $.globalCompositeOperation = 'lighter'\n        $.fillStyle = this.color\n        $.beginPath()\n        $.arc(this.location.x, this.location.y, this.radius, 0, Math.PI * 2)\n        $.globalAlpha = this.opacity\n        $.fill()\n        $.closePath()\n    }\n    this.update = function () {\n        if (this.location.x < 0 || this.life == 0 || this.opacity === 0 || this.radius < 1) {\n            this.dead = true\n        }\n        if (!this.dead) {\n            this.location.x += this.speed.x\n            this.location.y -= this.speed.y\n            this.life--\n            this.opacity -= 0.05\n            this.radius--\n        }\n    }\n}\n\n// 将火焰置于背景之后\nfunction stage() {\n    $.globalCompositeOperation = 'source-over'\n    $.fillStyle = 'rgba(0, 0, 0, 1)'\n    $.fillRect(0, 0, w, h)\n}\n\n// 重置画布大小\nfunction reset() {\n    w = c.width = window.innerWidth / 2\n    h = c.height = window.innerHeight / 2\n}\n\nfunction loop() {\n    stage()\n    var L = particles.length\n    if (L < 100) {\n        particles.push(new particle())\n    }\n    for (var i = 0; i < L; i++) {\n        var p = particles[i]\n        p.draw()\n        p.update()\n        if (p.dead) {\n            particles[i] = new particle()\n        }\n    }\n    requestAnimationFrame(loop)\n}\n\nfunction init() {\n    reset()\n    loop()\n}\n\nwindow.addEventListener('resize', reset)\n\ninit()"]}