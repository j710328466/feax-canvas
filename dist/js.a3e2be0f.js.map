{"version":3,"sources":["rouletteWheel/js/global.js","rouletteWheel/js/index.js"],"names":["Global","userAgentInfo","navigator","userAgent","flag","Agents","v","length","indexOf","t","b","c","d","canvas","e","bbox","getBoundingClientRect","x","IsPC","clientX","event","changedTouches","y","clientY","left","top","context","w","lineHeight","chr","split","temp","row","a","measureText","width","push","fillText","cornerX","cornerY","height","cornerRadius","moveTo","arcTo","window","onload","rw","RouletteWheel","canvasName","awards","params","centerX","centerY","outsideRadius","evenColor","oddColor","loseColor","odd","textColor","startRadian","duration","velocity","finish","document","querySelector","ctx","getContext","i","_startR","awardRadian","_endR","fillStyle","beginPath","arc","radius","closePath","fill"],"mappings":"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","file":"js.a3e2be0f.js","sourceRoot":"../src","sourcesContent":["export default class Global {\n    constructor () {};\n\n    /**\n     * 判断是否为 PC 端，若是则返回 true，否则返回 flase\n     */\n    IsPC() {\n        let userAgentInfo = navigator.userAgent,\n            flag = true,\n            Agents = [\"Android\", \"iPhone\",\"SymbianOS\", \"Windows Phone\",\"iPad\", \"iPod\"];\n\n        for (let v = 0; v < Agents.length; v++) {\n            if (userAgentInfo.indexOf(Agents[v]) > 0) {\n                flag = false;\n                break;\n            }\n        }\n        return flag;\n    };\n\n    /**\n     * 缓动函数，由快到慢\n     * @param {Num} t 当前时间\n     * @param {Num} b 初始值\n     * @param {Num} c 变化值\n     * @param {Num} d 持续时间\n     */\n    easeOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) return c / 2 * t * t + b;\n        return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    };\n\n    windowToCanvas(canvas, e) {\n        let bbox = canvas.getBoundingClientRect(),\n            x = this.IsPC() ? e.clientX || event.clientX : e.changedTouches[0].clientX,\n            y = this.IsPC() ? e.clientY || event.clientY : e.changedTouches[0].clientY;\n            \n        return {\n            x: x - bbox.left,\n            y: y - bbox.top\n        }\n    };\n\n    /**\n     * 绘制自动换行的文本\n     * @param {Obj} context\n     * @param {Str} t          文本内容\n     * @param {Num} x          坐标\n     * @param {Num} y          坐标\n     * @param {Num} w          文本限制宽度\n     * @param {Num} lineHeight 行高\n     */\n    drawText(context, t, x, y, w, lineHeight = 20){\n        let chr = t.split(''),\n            temp = '',           \n            row = [];\n\n        for (let a = 0; a < chr.length; a++){\n            if ( context.measureText(temp).width < w ) {\n                ;\n            }\n            else{\n                row.push(temp);\n                temp = '';\n            }\n            temp += chr[a];\n        };\n\n        row.push(temp);\n\n        for(let b = 0; b < row.length; b++){\n            context.fillText(row[b], x, y + (b + 1) * lineHeight);\n        };\n    };\n\n    /**\n     * 定义圆角矩形的方法\n     * @param {Obj} context\n     * @param {Num} cornerX \n     * @param {Num} cornerY \n     * @param {Num} width \n     * @param {Num} height \n     * @param {Num} cornerRadius \n     */\n    roundedRect(context, cornerX, cornerY, width, height, cornerRadius) {\n        if (width > 0) context.moveTo(cornerX + cornerRadius, cornerY);\n        else           context.moveTo(cornerX - cornerRadius, cornerY);\n\n        context.arcTo(cornerX + width, cornerY,\n            cornerX + width, cornerY + height,\n            cornerRadius);\n\n        context.arcTo(cornerX + width, cornerY + height,\n            cornerX, cornerY + height,\n            cornerRadius);\n\n        context.arcTo(cornerX, cornerY + height,\n            cornerX, cornerY,\n            cornerRadius);\n\n        if (width > 0) {\n            context.arcTo(cornerX, cornerY,\n                cornerX + cornerRadius, cornerY,\n                cornerRadius);\n        }\n        else {\n            context.arcTo(cornerX, cornerY,\n                cornerX - cornerRadius, cornerY,\n                cornerRadius);\n        }\n    }\n}","import Global from './global'\n\nwindow.onload = () => {\n    let rw = new RouletteWheel({\n        canvasName: '#rw',\n        width: '500',\n        height: '500',\n        awards: [               // 转盘内的奖品个数以及内容\n            '大保健', '话费10元', '话费20元', '话费30元', '保时捷911', '周大福土豪金项链',\n            //  'iphone 20', '火星7日游'\n        ]\n    })\n}\n\nclass RouletteWheel extends Global{\n    constructor(params) {\n        super()\n        this.width = params.width\n        this.height = params.height\n\n        this.centerX = params.centerX\n        this.centerY = params.centerY\n        this.outsideRadius = params.outsideRadius\n\n        this.evenColor = params.evenColor\n        this.oddColor = params.oddColor\n        this.loseColor = params.odd\n        this.textColor = params.textColor\n\n        this.awards = params.awards || []\n\n        this.startRadian = params.startRadian || 0\n        this.duration = params.duration || 4000\n        this.velocity = params.velocity || 10\n\n        // 回调函数\n        this.finish = params.finish\n    }\n\n    initCanvas() {\n        let canvas = document.querySelector(this.canvasName);\n        canvas.width = this.width;\n        canvas.height = this.height;\n        let ctx = canvas.getContext('2d')\n\n        for (let i = 0; i < this.awards.length; i++) {\n            // const award = awards[i]\n            let _startR = this.startRadian + this.awardRadian * i\n            let _endR = _startR + this.awardRadian\n\n            if (i % 2 === 0) ctx.fillStyle = \"#FF6766\"\n            else ctx.fillStyle = \"#FD5757\"\n\n            ctx.beginPath(); //开始绘制路径\n            ctx.moveTo(250, 250); //将当前位置移动到新的目标点\n            ctx.arc(250, 250, this.radius, _startR, _endR);\n            ctx.closePath(); //绘制路径\n            ctx.fill();\n        }\n        \n        // ctx.beginPath(); //开始绘制路径\n        // ctx.moveTo(250, 250); //将当前位置移动到新的目标点\n        // ctx.arc(250, 250, 250, Math.PI / 2, Math.PI);\n        // ctx.closePath(); //绘制路径\n        // ctx.fillStyle = \"#ccc\"; //填充背景颜色\n        // ctx.fill();\n        // ctx.beginPath(); //开始绘制路径\n        // ctx.moveTo(250, 250); //将当前位置移动到新的目标点\n        // ctx.arc(250, 250, 250, Math.PI, Math.PI * 1.5);\n        // ctx.closePath(); //绘制路径\n        // ctx.fillStyle = \"#ddd\"; //填充背景颜色\n        // ctx.fill();\n        // ctx.beginPath(); //开始绘制路径\n        // ctx.moveTo(250, 250); //将当前位置移动到新的目标点\n        // ctx.arc(250, 250, 250, Math.PI * 1.5, Math.PI * 2);\n        // ctx.closePath(); //绘制路径\n        // ctx.fillStyle = \"#aaa\"; //填充背景颜色\n        // ctx.fill();\n    }\n}"]}